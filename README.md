<h1 align="center">FunPay Cortex</h1>
<h4 align="center">Простой и эффективный бот для автоматизации FunPay</h4>

<h2 align="center">Перед началом настоятельно рекомендую залететь в наш <a href="https://t.me/FunPayCortex">Telegram чат (клик)</a>. Тут и поможем чем сможем и посидеть можно.</h2>

**Содержание**

*   [Возможности](#robot-возможности)
    *   [FunPay](#shopping_cart-funpay)
    *   [Уведомления и ПУ в Telegram](#left_speech_bubble-уведомления-и-пу-в-telegram)
    *   [Дополнительные возможности](#gear-дополнительные-возможности)
*   [Преимущества](#1st_place_medal-преимущества)
    *   [Для пользователей](#grinning-для-пользователей)
    *   [Для разработчиков](#computer-для-разработчиков)
*   [Плагины](#electric_plug-плагины)
*   [Установка](#arrow_down-установка)
    *   [Windows](#large_blue_diamond-windows)
    *   [Linux (Ubuntu)](#hotsprings-linux-ubuntu)
    *   [Android (Termux)](#iphone-android-termux)
*   [Установка плагинов](#electric_plug-установка-плагинов-1)
*   [Мне нужна помощь](#question-мне-нужна-помощь)
*   [Star it](#star-star-it)

## :robot: Возможности
### :shopping_cart: FunPay

*   Автовыдача товаров.
*   Автоподнятие лотов.
*   Автоответ на заготовленные команды.
*   Автовосстановление лотов после продажи.
*   Автодеактивация лотов, если товары закончились.
*   Вечный онлайн.
*   Уведомления в телеграм.
*   Полноценная ПУ в Telegram.

### :left_speech_bubble: Уведомления и ПУ в Telegram

*   Возможность установки нескольких чатов для уведомлений.
*   Уведомления о поднятии лотов.
*   Уведомления о новых заказах.
*   Уведомления о выдаче товара.
*   Уведомления о новых сообщениях
*   Возможность отвечать на сообщения прямо из Telegram.
*   Возможность полностью настраивать автовыдачу / автоответчик и все остальные модули FPCortex.
*   Возможность добавлять автовыдачу для лотов, получая лоты прямо с FunPay.

### :gear: Дополнительные возможности

*   Использование переменных в тексте для автоответа / автовыдачи.
*   Создание плагинов для кастомизации функционала без редактирования исходного кода самого Кортекса.

## :1st_place_medal: Преимущества
### :grinning: Для пользователей

*   Больше, чем наличие самого нужного функционала.
*   Оптимизация. 20 МБ свободного места на диске, до 50 МБ ОЗУ, доступ в интернет - все что нужно для работы.
*   Возможность установить на любую платформу, которую поддерживает Python: Windows, Linux, IOS, Android и т.д.
*   Возможность установки плагинов дает огромную вариативность модификации стандартного функционала под самые разные нужды.
*   Гибкие и при этом простые конфиги, написанные в INI-формате.
*   (Зависит от тебя) Постоянные обновления, быстрое реагирования на баги / предложения о новом функционале.
*   Полное управление через Telegram.

### :computer: Для разработчиков

*   Выбран самый простой и при этом один из самых мощных языков для такого рода приложений - Python.
*   Полная документация кода. Все классы / методы / функции имеют док-строки, type-хинты.
*   Широкое использование ООП. Почти каждый эвент / сообщение / заказ и т.д. представляют собой экземпляр соответствующего класса, а не просто набор данных в JSON.
*   Возможность легкого создания плагинов.
*   Сконфигурированный логгер. Никаких принтов!
*   Собственный Python-пакет [FunPayAPI], который никак не привязан к FunPay Cortex.
*   Поддержка лично от меня ([@beedge](https://github.com/beedgee)) :)

## :electric_plug: Плагины

*   [Канал с плагинами](https://t.me/FunPayCortex)
*   Управление плагинами доступно через Telegram ПУ.

## :arrow_down: Установка
### :large_blue_diamond: Windows

1.  Скачайте и установите [Python 3.11.0](https://www.python.org/ftp/python/3.11.0/python-3.11.0-amd64.exe) (или новее).
2.  При установке поставьте галочку у `Add python.exe to PATH` на первом экране установки.
3.  Скачайте архив с кодом FunPay Cortex с [GitHub](https://github.com/beedgee/FunPayCortex/archive/refs/heads/main.zip).
4.  Распакуйте архив и перенесите папку `FunPayCortex-main` в нужное Вам место.
5.  Перейдите в папку `FunPayCortex-main`.
6.  Запустите файл `Setup.bat` (если он есть, или установите зависимости вручную: `pip install -r requirements.txt`). Дождитесь окончания загрузки пакетов.
7.  Закройте командную строку и запустите файл `Start.bat` (или запустите вручную: `python main.py`).

### :hotsprings: Linux (Ubuntu)

1.  Обновите систему и установите необходимые пакеты:
    ```bash
    sudo apt update && sudo apt upgrade -y && sudo apt install python3 python3-pip python3-venv git wget -y
    ```
2.  Создайте пользователя (если необходимо) и переключитесь на него:
    ```bash
    # sudo adduser cortexuser # (замените cortexuser на желаемое имя)
    # su - cortexuser
    ```
    *(Запуск от root не рекомендуется для долгосрочной работы, лучше создать отдельного пользователя)*
3.  Клонируйте репозиторий:
    ```bash
    git clone https://github.com/beedgee/FunPayCortex.git FunPayCortex
    cd FunPayCortex
    ```
4.  Создайте виртуальное окружение и активируйте его:
    ```bash
    python3 -m venv pyvenv
    source pyvenv/bin/activate
    ```
5.  Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
6.  Запустите первоначальную настройку (если файл `configs/_main.cfg` отсутствует, `main.py` вызовет `first_setup.py`):
    ```bash
    python main.py 
    ```
    Следуйте инструкциям в консоли.
7.  (Опционально) Настройте запуск как сервис systemd (см. файл `FunPayCortex@.service` в репозитории и адаптируйте пути).

**Решение проблемы с кодировкой latin-1 (Если возникнет)**

1.  Установите русскую локаль:
    ```bash
    sudo apt-get install -y language-pack-ru 
    sudo locale-gen ru_RU.UTF-8
    ```
2.  Обновите локаль системы:
    ```bash
    sudo update-locale LANG=ru_RU.UTF-8
    ```
3.  **Перезайдите на сервер** (выйдите и снова подключитесь), чтобы изменения применились.
4.  Повторите попытку запуска бота.

### :iphone: Android (Termux)

Эта инструкция поможет вам установить и запустить FunPayCortex на вашем Android-устройстве с помощью Termux.

**Требования:**

*   Установленное приложение Termux из F-Droid (рекомендуется) или Google Play.
*   Стабильное интернет-соединение.
*   Достаточно свободного места на устройстве и оперативной памяти.
*   Зарядное устройство (процесс установки может быть энергозатратным).

⚙️ **Шаг 1: Подготовка Termux**

1.  Обновите пакеты Termux:
    Откройте Termux и выполните:
    ```bash
    pkg update -y && pkg upgrade -y
    ```
2.  Установите основные инструменты:
    ```bash
    pkg install python python-pip git build-essential clang libxml2 libxslt libjpeg-turbo libpng libcrypt pkg-config rust zlib libiconv -y
    ```
    *Примечание: Пакет `python-dev` в Termux не нужен. `rust` необходим для сборки `bcrypt`.*

📥 **Шаг 2: Клонирование репозитория**

1.  Перейдите в желаемую директорию (например, в домашнюю `~`).
2.  Клонируйте репозиторий FunPayCortex:
    ```bash
    git clone https://github.com/beedgee/FunPayCortex.git
    cd FunPayCortex
    ```

🐍 **Шаг 3: Настройка Python-окружения и установка зависимостей**

1.  Создайте и активируйте виртуальное окружение (настоятельно рекомендуется):
    ```bash
    python -m venv venv
    source venv/bin/activate
    ```
    После активации перед вашей командной строкой появится `(venv)`.
2.  Установите Python-зависимости:
    ```bash
    pip install -r requirements.txt
    ```
    ⚠️ **Важно при установке lxml и bcrypt:**
    Компиляция этих пакетов может занять много времени (10-30+ минут). Наберитесь терпения.
    Если возникнут ошибки, убедитесь, что все пакеты из Шага 1.2 установлены.

🚀 **Шаг 4: Первичная настройка и запуск**

1.  Запустите скрипт первичной настройки (если файл `configs/_main.cfg` отсутствует):
    ```bash
    python main.py
    ```
    Вам будет предложено ввести данные для конфигурации.
2.  Последующие запуски бота:
    Убедитесь, что вы находитесь в директории `FunPayCortex` и виртуальное окружение `venv` активировано.
    ```bash
    python main.py
    ```

🌙 **Шаг 5: Обеспечение фоновой работы**

Чтобы бот продолжал работать после закрытия Termux:
1.  Установите `tmux`: `pkg install tmux -y`
2.  Создайте сессию: `tmux new-session -s fpcortex`
3.  Внутри сессии: `cd ~/FunPayCortex && source venv/bin/activate && python main.py`
4.  Отсоединитесь: `Ctrl+b`, затем `d`.
5.  Вернуться: `tmux attach-session -t fpcortex`
    Используйте `termux-wake-lock` перед запуском бота в `tmux`.

## :electric_plug: Установка плагинов

Не устанавливайте плагины из непроверенных источников. Через систему плагинов злоумышленники могут получить полный доступ к Вашему устройству или аккаунту FunPay. Установка плагинов крайне проста.

1.  Введите команду `/menu` в диалоге с ботом Telegram.
2.  Нажмите кнопку ▶️ `Далее`.
3.  Нажмите кнопку 🧩 `Плагины`.
4.  Нажмите кнопку ➕ `Добавить плагин`.
5.  Отправьте или перешлите боту файл плагина (`.py`).

## :question: Мне нужна помощь
Если у вас остались какие-либо вопросы, обращайтесь к [@beedge](https://t.me/beedge) или [в наш Telegram чат](https://t.me/FunPayCortex).

## :star: Star it
Если вам удобно пользоваться FunPay Cortex, не забудьте поставить :star: звезду :star: [данному проекту](https://github.com/beedgee/FunPayCortex) в правом
верхнем углу GitHub-страницы (нужно быть авторизованным в свой аккаунт) :)